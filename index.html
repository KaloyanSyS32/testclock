<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Desk Clock Pro</title>
<style>
  body {
    margin: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: #000;
    color: #fff;
    font-family: "Segoe UI", sans-serif;
    overflow: hidden;
    transition: background 0.6s, color 0.6s;
  }

  .clock { font-size: 6rem; font-weight: bold; }
  .date { font-size: 2rem; margin-top: 10px; }
  #fullscreen-btn, .control-btn {
    margin-top: 10px;
    padding: 10px 20px;
    font-size: 1rem;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    background: rgba(255,255,255,0.2);
    color: #fff;
    backdrop-filter: blur(5px);
  }

  body.night { background: #111; color: #888; }

  .star {
    position: absolute;
    width: 2px;
    height: 2px;
    background: white;
    border-radius: 50%;
    opacity: 0.8;
    animation: drift linear infinite;
  }

  @keyframes drift {
    0% { transform: translateY(0) translateX(0); opacity: 0; }
    10% { opacity: 0.8; }
    100% { transform: translateY(-200vh) translateX(50vw); opacity: 0; }
  }
</style>
</head>
<body>
<div class="clock" id="clock">00:00:00</div>
<div class="date" id="date">Monday, January 1, 1970</div>

<!-- Controls -->
<button id="fullscreen-btn">Fullscreen</button>
<div style="margin-top:15px;">
  <button class="control-btn" id="day-theme">Day</button>
  <button class="control-btn" id="night-theme">Night</button>
</div>
<div style="margin-top:10px;">
  <label>Stars: <input type="range" id="star-density" min="10" max="100" value="50"></label>
</div>
<div style="margin-top:10px;">
  <input type="time" id="alarm-time">
  <button class="control-btn" id="set-alarm">Set Alarm</button>
</div>

<script>
const clock = document.getElementById("clock");
const dateEl = document.getElementById("date");
const body = document.body;
const fullscreenBtn = document.getElementById("fullscreen-btn");
let starsCreated = false;
let starElements = [];
let alarmTime = null;

// Clock + date
function updateClock() {
  const now = new Date();
  clock.textContent = now.toLocaleTimeString("en-GB");
  dateEl.textContent = now.toLocaleDateString("en-GB", {weekday:"long", year:"numeric", month:"long", day:"numeric"});
  checkAlarm(now);
}
setInterval(updateClock, 1000);
updateClock();

// Fullscreen
fullscreenBtn.addEventListener("click", () => {
  document.documentElement.requestFullscreen().then(()=>{fullscreenBtn.style.display='none';});
});
document.addEventListener("fullscreenchange", ()=>{if(!document.fullscreenElement) fullscreenBtn.style.display='block';});

// Theme buttons
document.getElementById("day-theme").addEventListener("click", ()=>body.classList.remove("night"));
document.getElementById("night-theme").addEventListener("click", ()=>body.classList.add("night"));

// Alarm
document.getElementById("set-alarm").addEventListener("click", ()=>{
  alarmTime = document.getElementById("alarm-time").value;
  if(alarmTime) alert("Alarm set for " + alarmTime);
});
function checkAlarm(now){
  if(!alarmTime) return;
  const [h,m] = alarmTime.split(":").map(Number);
  if(now.getHours()===h && now.getMinutes()===m && now.getSeconds()===0){
    alert("â° Alarm!");
    alarmTime=null;
  }
}

// Stars management
const starRange = document.getElementById("star-density");
function updateStars(){
  const now = new Date();
  const hour = now.getHours();
  const desiredCount = parseInt(starRange.value);

  if(hour>=21 || hour<6){
    if(starElements.length < desiredCount){
      const toAdd = desiredCount - starElements.length;
      for(let i=0;i<toAdd;i++){
        const star = document.createElement("div");
        star.classList.add("star");
        star.style.left = Math.random()*100+"vw";
        star.style.top = Math.random()*100+"vh";
        star.style.animationDuration = 5 + Math.random()*10 +"s";
        body.appendChild(star);
        starElements.push(star);
      }
    } else if(starElements.length>desiredCount){
      const removeCount = starElements.length - desiredCount;
      for(let i=0;i<removeCount;i++){
        const star = starElements.pop();
        star.remove();
      }
    }
  } else {
    starElements.forEach(s=>s.remove());
    starElements=[];
  }
}
setInterval(updateStars, 1000);
updateStars();
</script>
</body>
</html>
